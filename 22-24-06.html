<html>
	<head>
		<meta charset="utf-8">
		<title>Exercício do gráfico</title>
		
		<script>
		
		var mudabg = setInterval(mudebg, 1000);
		
		function mudebg(){
			
		
				var r = Math.round(Math.random() * (255 - 0) + 0);
				var g = Math.round(Math.random() * (255 - 0) + 0);
				var b = Math.round(Math.random() * (155 - 0) + 0);
			
				document.body.style.backgroundColor = "rgb("+r+","+g+","+b+")";
				
			} 
			
			
			
		</script>
	
	
	</head>
	<body id="bg">
		
		
		
		<button onclick="mudebg();">clique aqui</button>
		
		
		<canvas  width="600" height="400"></canvas>

		<script>
		
		

		function desenhaRetangulo(x, y, largura, altura, cor) {
			var tela = document.querySelector('canvas');
			var pincel = tela.getContext('2d');

			pincel.fillStyle=cor;
			pincel.fillRect(x,y, largura, altura);
			pincel.strokeStyle='black';
			pincel.strokeRect(x,y, largura, altura);
		}

		function desenhaTexto(x, y, texto) {
			var tela = document.querySelector('canvas');
			var pincel = tela.getContext('2d');

			pincel.font='10px Comic Sans MS';
			pincel.fillStyle='black';
			pincel.fillText(texto, x, y);    
		}


		function desenhaBarra(x, y, serie, cores, texto) {
			
			
			desenhaTexto(x-1, y-1, texto);
			
				
			var i;
				for (i = 0; i < serie.length; i++) {
						
					desenhaRetangulo(x, y, 50, serie[i], cores[i]);
				
				}
				
			
			
		}
		
		function criaLegenda(x, y, largura, altura, cor, texto){
			
			desenhaRetangulo(x, y, largura, altura, cor);
			
			x = x+15;
			y = y+10;
			
			desenhaTexto(x, y, texto)
		
		}

		var serie2015 = [50, 25, 20, 5];
		
		var serie2016 = [65, 20, 13, 2];
		
		
		
		
		var cores = ['red', 'green', 'yellow', 'blue'];
		
			
		desenhaBarra(50, 50, serie2015, cores, '2015');
		desenhaBarra(150, 50, serie2016, cores, '2016');
		
		criaLegenda(210, 50, 10, 10, 'red', 'Chrome');
		criaLegenda(210, 65, 10, 10, 'green', 'Firefox');
		criaLegenda(210, 80, 10, 10, 'yellow', 'Safari');
		criaLegenda(210, 95, 10, 10, 'blue', 'Outros');
		
		</script>
	
	
	</body>


</html>